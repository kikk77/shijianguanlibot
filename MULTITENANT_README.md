# ğŸ¤– å¤šç§Ÿæˆ·Telegramé¢‘é“ç®¡ç†ç³»ç»Ÿ

> æ”¯æŒ1000ä¸ªç”¨æˆ·ç‹¬ç«‹ç®¡ç†æ—¶é—´è¡¨çš„Telegramæœºå™¨äººç³»ç»Ÿ

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸ¢ **å¤šç§Ÿæˆ·æ¶æ„** - æ¯ä¸ªç”¨æˆ·ç‹¬ç«‹æ•°æ®åº“å’Œæ—¶é—´è¡¨
- ğŸ“± **ç§»åŠ¨ç«¯ç®¡ç†** - ç›´æ¥åœ¨Telegramæœºå™¨äººå†…æ“ä½œæ’ç­
- âš¡ **å³æ—¶åŒæ­¥** - æ’ç­å˜åŒ–ç«‹å³æ›´æ–°é¢‘é“å¸–å­
- ğŸ” **æ•°æ®éš”ç¦»** - ç”¨æˆ·æ•°æ®å®Œå…¨ç‹¬ç«‹ï¼Œç¡®ä¿éšç§å®‰å…¨
- ğŸš€ **ä¸€é”®éƒ¨ç½²** - Railwayå¹³å°ä¸€é”®éƒ¨ç½²ï¼Œè‡ªåŠ¨é…ç½®
- ğŸ“Š **å®æ—¶ç»Ÿè®¡** - é¢„çº¦å’Œæ”¶å…¥æ•°æ®å®æ—¶ç»Ÿè®¡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
å®˜æ–¹æœºå™¨äºº (æ³¨å†Œç®¡ç†)
    â†“
ç”¨æˆ·æ³¨å†Œ â†’ ç‹¬ç«‹æ•°æ®ç©ºé—´
    â†“
å†…è”é”®ç›˜ç®¡ç†é¢æ¿
    â†“
è‡ªåŠ¨é¢‘é“åŒæ­¥
```

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### Railway ä¸€é”®éƒ¨ç½²

1. **Fork æœ¬ä»“åº“**
   ```bash
   git clone https://github.com/your-username/multitenant-telegram-bot.git
   cd multitenant-telegram-bot
   ```

2. **åˆ›å»ºTelegramæœºå™¨äºº**
   - è”ç³» [@BotFather](https://t.me/BotFather)
   - åˆ›å»ºæ–°æœºå™¨äºº: `/newbot`
   - è·å–Bot Token

3. **éƒ¨ç½²åˆ°Railway**
   - ç™»å½• [Railway.app](https://railway.app)
   - ç‚¹å‡» "Deploy from GitHub repo"
   - é€‰æ‹©ä½ forkçš„ä»“åº“
   - è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
     ```
     OFFICIAL_BOT_TOKEN=ä½ çš„æœºå™¨äººToken
     NODE_ENV=production
     PORT=3000
     ```

4. **é…ç½®Volumeå­˜å‚¨**
   - åœ¨Railwayé¡¹ç›®ä¸­æ·»åŠ Volume
   - æŒ‚è½½è·¯å¾„: `/app/data`
   - å¤§å°: 1GB (æ”¯æŒ1000ç”¨æˆ·ç»°ç»°æœ‰ä½™)

### æœ¬åœ°å¼€å‘

1. **å®‰è£…ä¾èµ–**
   ```bash
   npm install
   ```

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```bash
   cp env.example .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„æœºå™¨äººToken
   ```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   npm run dev
   ```

## ğŸ¯ ä½¿ç”¨æµç¨‹

### ç”¨æˆ·æ³¨å†Œæµç¨‹

1. **ç”¨æˆ·å¯åŠ¨å®˜æ–¹æœºå™¨äºº**
   ```
   /start â†’ æ˜¾ç¤ºæ¬¢è¿ç•Œé¢
   /register â†’ å¼€å§‹æ³¨å†Œæµç¨‹
   ```

2. **é…ç½®é¢‘é“ä¿¡æ¯**
   - å‘é€é¢‘é“IDæˆ–@username
   - ç³»ç»Ÿè‡ªåŠ¨éªŒè¯æƒé™
   - åˆ›å»ºç‹¬ç«‹æ•°æ®ç©ºé—´

3. **ç®¡ç†é¢æ¿æ“ä½œ**
   ```
   /panel â†’ æ‰“å¼€ç®¡ç†é¢æ¿
   â° æ’ç­ç®¡ç† â†’ å†…è”é”®ç›˜æ“ä½œ
   ğŸ‘¥ æœåŠ¡ç®¡ç† â†’ æ·»åŠ /ç¼–è¾‘æœåŠ¡
   ğŸ“Š æ•°æ®ç»Ÿè®¡ â†’ æŸ¥çœ‹é¢„çº¦æ•°æ®
   ```

### æ’ç­ç®¡ç†

#### 7å¤©æ¦‚è§ˆç•Œé¢
- æ˜¾ç¤ºæœªæ¥7å¤©æ’ç­çŠ¶æ€
- æ¯å¤©æ˜¾ç¤ºå¯é¢„çº¦æ—¶é—´æ®µ
- ç‚¹å‡»æ—¥æœŸè¿›å…¥è¯¦ç»†ç®¡ç†

#### å•æ—¥è¯¦ç»†ç®¡ç†
- 10:00-22:00 æ—¶é—´æ®µæŒ‰é’®
- ğŸŸ¦ è“è‰² = å¯é¢„çº¦
- ğŸŸ¨ é»„è‰² = å·²æ»¡  
- ğŸŸ¥ çº¢è‰² = ä¼‘æ¯
- ç‚¹å‡»åˆ‡æ¢çŠ¶æ€

#### å¿«é€Ÿæ“ä½œ
- âœ… å…¨éƒ¨å¼€æ”¾
- ğŸš« å…¨éƒ¨ä¼‘æ¯
- ğŸ’¤ è®¾ä¸ºæ»¡äº†
- ğŸ”„ åŒæ­¥é¢‘é“

## ğŸ“¡ APIæ¥å£

### åŸºç¡€æ¥å£
```
GET  /health              # å¥åº·æ£€æŸ¥
GET  /api                 # APIæ–‡æ¡£
GET  /api/stats           # ç³»ç»Ÿç»Ÿè®¡
```

### ç”¨æˆ·ç®¡ç†
```
GET  /api/users           # è·å–æ‰€æœ‰ç”¨æˆ·
POST /api/users           # åˆ›å»ºç”¨æˆ·
```

### æœåŠ¡æä¾›è€…
```
GET  /api/users/:userId/providers
POST /api/users/:userId/providers
```

### æ’ç­ç®¡ç†
```
GET  /api/users/:userId/providers/:providerId/schedule
POST /api/users/:userId/providers/:providerId/schedule
```

### é¢„çº¦ç®¡ç†
```
GET  /api/users/:userId/bookings
POST /api/users/:userId/bookings
```

## ğŸ’¾ æ•°æ®åº“è®¾è®¡

### ç”¨æˆ·è¡¨ (users)
```sql
- user_id: ç”¨æˆ·Telegram ID
- channel_id: é¢‘é“ID
- username: ç”¨æˆ·å
- full_name: å…¨å
- status: çŠ¶æ€
```

### æœåŠ¡æä¾›è€…è¡¨ (user_providers)
```sql
- user_id: æ‰€å±ç”¨æˆ·
- provider_id: æœåŠ¡ID
- name: æœåŠ¡åç§°
- price: ä»·æ ¼
- images: å›¾ç‰‡JSONæ•°ç»„
```

### æ’ç­è¡¨ (user_schedules)
```sql
- user_id: æ‰€å±ç”¨æˆ·
- provider_id: æœåŠ¡ID
- date: æ—¥æœŸ
- hour: å°æ—¶
- status: çŠ¶æ€(available/booked/rest)
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|
| `OFFICIAL_BOT_TOKEN` | âœ… | å®˜æ–¹æœºå™¨äººToken |
| `NODE_ENV` | âŒ | è¿è¡Œç¯å¢ƒ (production/development) |
| `PORT` | âŒ | æœåŠ¡ç«¯å£ (é»˜è®¤3000) |
| `DB_PATH` | âŒ | æ•°æ®åº“è·¯å¾„ (é»˜è®¤./data) |

### Railwayé…ç½®

1. **ç¯å¢ƒå˜é‡è®¾ç½®**
   - `OFFICIAL_BOT_TOKEN`: ä½ çš„æœºå™¨äººToken
   - `NODE_ENV`: production

2. **VolumeæŒ‚è½½**
   - Mount Path: `/app/data`
   - Size: 1GB

## ğŸ“Š æ€§èƒ½ç‰¹å¾

- **ç”¨æˆ·å®¹é‡**: 1000ä¸ªç‹¬ç«‹ç”¨æˆ·
- **æ•°æ®éš”ç¦»**: æ¯ç”¨æˆ·ç‹¬ç«‹æ•°æ®ç©ºé—´
- **å†…å­˜å ç”¨**: çº¦100MB (åŸºç¡€è¿è¡Œ)
- **å­˜å‚¨éœ€æ±‚**: çº¦500MB (1000ç”¨æˆ·æ•°æ®)
- **å“åº”æ—¶é—´**: <200ms (å†…è”é”®ç›˜æ“ä½œ)

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯**: Node.js 18+ + Express
- **æ•°æ®åº“**: SQLite3 (better-sqlite3)
- **æœºå™¨äºº**: node-telegram-bot-api
- **éƒ¨ç½²**: Docker + Railway
- **å­˜å‚¨**: Railway Volume

## ğŸ“ å¼€å‘è®¡åˆ’

- [x] å¤šç§Ÿæˆ·æ•°æ®åº“è®¾è®¡
- [x] å®˜æ–¹æœºå™¨äººæ³¨å†Œç®¡ç†
- [x] å†…è”é”®ç›˜æ’ç­ç®¡ç†
- [x] APIæ¥å£è®¾è®¡
- [x] Railwayéƒ¨ç½²é…ç½®
- [ ] é¢‘é“å¸–å­è‡ªåŠ¨åŒæ­¥
- [ ] é¢„çº¦å¤„ç†é€»è¾‘
- [ ] æ•°æ®ç»Ÿè®¡å›¾è¡¨
- [ ] æ‰¹é‡æ“ä½œåŠŸèƒ½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜è¯·æäº¤Issueæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ 